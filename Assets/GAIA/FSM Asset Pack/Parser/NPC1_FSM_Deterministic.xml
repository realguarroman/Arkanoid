<?xml version="1.0" encoding="utf-8" ?>

<FSM_Machine>
	<FSMtype Probabilistic="NO">CLASSIC</FSMtype>
	<FSMid>NPC1_FSMDeterministic</FSMid>
	<Fsm>
		<Callback>EventsTrigger</Callback>
		<States>
			<State Initial="YES">
				<S_Name>START</S_Name>
				<S_Action>NULL</S_Action>
				<S_inAction>HIDE</S_inAction>
				<S_outAction>SHOW</S_outAction>
				<S_Fsm></S_Fsm>
			</State>
			<State Initial="NO">
				<S_Name>MOVING</S_Name>
				<S_Action>MOVE</S_Action>
				<S_inAction>START_MOVING</S_inAction>
				<S_outAction>NULL</S_outAction>
				<S_Fsm></S_Fsm>
			</State>
			<State Initial="NO">
				<S_Name>LAYING_BRICK</S_Name>
				<S_Action>NULL</S_Action>
				<S_inAction>LAY_BRICK</S_inAction>
				<S_outAction>NULL</S_outAction>
				<S_Fsm></S_Fsm>
			</State>
			<State Initial="NO">
				<S_Name>DEAD</S_Name>
				<S_Action>NULL</S_Action>
				<S_inAction>KILL</S_inAction>
				<S_outAction>NULL</S_outAction>
				<S_Fsm></S_Fsm>
			</State>
		</States>
		
		<Transitions> 
			<Transition>
				<T_Name>START_TO_MOVING</T_Name>
				<T_Origin>START</T_Origin>
				<T_Destination>MOVING</T_Destination>
				<T_Action>NULL</T_Action>
				<Events>
					<Event>
						<ID>PLAY_EVENT</ID> 
						<Type>BASIC</Type>
					</Event>
				</Events>	
			</Transition>
			<Transition>
				<T_Name>MOVING_TO_LAYING_BRICK</T_Name>
				<T_Origin>MOVING</T_Origin>
				<T_Destination>LAYING_BRICK</T_Destination>
				<T_Action>NULL</T_Action>
				<Events>
					<Event>
						<ID>LAY_BRICK_EVENT</ID>
						<Type>BASIC</Type>
					</Event>
				</Events>
			</Transition>
			<Transition>
				<T_Name>MOVING_TO_DEAD</T_Name>
				<T_Origin>MOVING</T_Origin>
				<T_Destination>DEAD</T_Destination>
				<T_Action>NULL</T_Action>
				<Events>
					<Event>
						<ID>KILL_EVENT</ID>
						<Type>BASIC</Type>
					</Event>
				</Events>
			</Transition>
			<Transition>
				<T_Name>LAYING_BRICK_TO_MOVING</T_Name>
				<T_Origin>LAYING_BRICK</T_Origin>
				<T_Destination>MOVING</T_Destination>
				<T_Action>NULL</T_Action>
				<Events>
					<Event>
						<ID>MOVE_EVENT</ID>
						<Type>BASIC</Type>
					</Event>
				</Events>
			</Transition>
			<Transition>
				<T_Name>LAYING_BRICK_TO_DEAD</T_Name>
				<T_Origin>LAYING_BRICK</T_Origin>
				<T_Destination>DEAD</T_Destination>
				<T_Action>NULL</T_Action>
				<Events>
					<Event>
						<ID>KILL_EVENT</ID>
						<Type>BASIC</Type>
					</Event>
				</Events>
			</Transition>
			<Transition>
				<T_Name>DEAD_TO_MOVING</T_Name>
				<T_Origin>DEAD</T_Origin>
				<T_Destination>MOVING</T_Destination>
				<T_Action>NULL</T_Action>
				<Events>
					<Event>
						<ID>RESPAWN_EVENT</ID>
						<Type>BASIC</Type>
					</Event>
				</Events>
			</Transition>

			<Transition>
				<T_Name>MOVING_TO_START</T_Name>
				<T_Origin>MOVING</T_Origin>
				<T_Destination>START</T_Destination>
				<T_Action>NULL</T_Action>
				<Events>
					<Event>
						<ID>IDLE_EVENT</ID>
						<Type>BASIC</Type>
					</Event>
				</Events>
			</Transition>
			<Transition>
				<T_Name>LAYING_BRICK_TO_START</T_Name>
				<T_Origin>LAYING_BRICK</T_Origin>
				<T_Destination>START</T_Destination>
				<T_Action>NULL</T_Action>
				<Events>
					<Event>
						<ID>IDLE_EVENT</ID>
						<Type>BASIC</Type>
					</Event>
				</Events>
			</Transition>
		</Transitions>
	</Fsm>
</FSM_Machine>